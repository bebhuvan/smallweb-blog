---
import ThemeToggle from './ThemeToggle.astro';

interface Props {
  currentCategory?: string;
}

const { currentCategory } = Astro.props;

const categories = [
  { slug: 'tech', name: 'Tech', color: 'tech' },
  { slug: 'design', name: 'Design', color: 'design' },
  { slug: 'life', name: 'Life', color: 'life' },
  { slug: 'culture', name: 'Culture', color: 'culture' },
  { slug: 'economics', name: 'Economics', color: 'economics' },
  { slug: 'finance', name: 'Finance', color: 'finance' },
];

const currentPath = Astro.url.pathname;
const isHome = currentPath === '/';
---

<header class="pt-12 pb-8 px-6">
  <div class="max-w-2xl mx-auto">
    <div class="flex items-start justify-between gap-4">
      <div>
        <a href="/" class="inline-block">
          <h1 class="font-serif text-3xl md:text-4xl tracking-tight text-(--color-ink)">
            Indie Blogs
          </h1>
        </a>
        <p class="mt-2 text-(--color-ink-muted) text-sm md:text-base leading-relaxed max-w-md">
          A cozy corner of the web. Fresh thoughts from independent writers who care about their craft.
        </p>
      </div>
      <ThemeToggle />
    </div>
  </div>
</header>

<nav class="sticky top-0 bg-(--color-bg)/90 backdrop-blur-md z-10 px-6 py-3 border-b border-(--color-rule)">
  <div class="max-w-2xl mx-auto">
    <div class="flex items-center gap-2 overflow-x-auto scrollbar-hide -mx-2 px-2">
      <a
        href="/"
        class:list={[
          "nav-pill shrink-0",
          isHome ? "nav-pill-active" : "text-(--color-ink-muted)"
        ]}
      >
        All
      </a>
      {categories.map((cat) => {
        const isActive = currentPath === `/category/${cat.slug}` || currentCategory === cat.slug;
        return (
          <a
            href={`/category/${cat.slug}`}
            class:list={[
              "nav-pill shrink-0",
              isActive ? "nav-pill-active" : "text-(--color-ink-muted)"
            ]}
          >
            <span class:list={[
              "inline-block w-2 h-2 rounded-full mr-2",
              `bg-(--color-${cat.color})`
            ]} />
            {cat.name}
          </a>
        );
      })}
    </div>
  </div>
</nav>

<style>
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
</style>
